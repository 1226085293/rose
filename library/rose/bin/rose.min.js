var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(t){i(t)}}function a(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},rose;!function(e){var t=function(){function e(){this._events=Object.create(null),this._eventsCount=0}return e.prototype.eventNames=function(){if(0===this._eventsCount)return[];var e=this._events;return Object.keys(e)},e.prototype.listeners=function(e){var t=this._events[e];if(!t)return[];for(var n=[],r=0,o=t.length;o>r;r++)n[r]=t[r].fn;return n},e.prototype.listenerCount=function(e){var t=this._events[e];return t?t.length:0},e.prototype.emit=function(e,t,n,r,o,i){var s=this._events[e];if(!s)return!1;for(var a=[],u=0,c=s.length;c>u;u++){var l=s[u];switch(l.once&&a.push(l),arguments.length){case 1:l.fn.call(l.context);break;case 2:l.fn.call(l.context,t);break;case 3:l.fn.call(l.context,t,n);break;case 4:l.fn.call(l.context,t,n,r);break;case 5:l.fn.call(l.context,t,n,r,o);break;case 6:l.fn.call(l.context,t,n,r,o,i);break;default:console.error(">>>更多参数请使用数组实现!")}}for(;a.length;){var f=a.pop();this.removeListener(e,f.fn,f.context)}return!0},e.prototype.removeListener=function(e,t,n){var r=this._events[e];if(r){if(!t)return void this._clearEvent(e);for(var o=0,i=r.length;i>o;o++)if(r[o].fn===t&&r[o].context===n)return void r.splice(o,1)}},e.prototype.on=function(e,t,n){this._addListener(e,t,n,!1)},e.prototype.once=function(e,t,n){this._addListener(e,t,n,!0)},e.prototype.removeAllListeners=function(e){e?this._events[e]&&this._clearEvent(e):(this._events=Object.create(null),this._eventsCount=0)},e.prototype.off=function(e,t,n){this.removeListener(e,t,n)},e.prototype.addListener=function(e,t,n){this.on(e,t,n)},e.prototype._addListener=function(e,t,n,r){if("function"!=typeof t)throw new TypeError("The listener must be a function");var o={fn:t,context:n,once:r},i=this._events[e];i||(i=this._events[e]=[],this._eventsCount++),i.push(o)},e.prototype._clearEvent=function(e){--this._eventsCount,delete this._events[e]},e}();e.EventEmitter=t,__reflect(t.prototype,"rose.EventEmitter")}(rose||(rose={}));var rose;!function(e){var t=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=.4);var r=new egret.Sprite;return r.graphics.beginFill(0,n),r.graphics.drawRect(0,0,e.layerMgr.gameStage.stageWidth,e.layerMgr.gameStage.stageHeight),r.graphics.endFill(),r.touchEnabled=t,r},n=function(n){function r(){var e=n.call(this)||this;return e.isFull=!1,e.isMask=!0,e.isClickMaskClose=!0,e.isPopupCenter=!0,e._containerName="dlg",e.isPlayEffect=!1,e._initProp(),e}return __extends(r,n),r.prototype._initProp=function(){this.emitter=new e.EventEmitter,this.once(egret.Event.ADDED_TO_STAGE,this.onEnterStage,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.onExitStage,this)},r.prototype.init=function(){},r.prototype.show=function(){this._showing()},r.prototype.onEnterStage=function(){},r.prototype._showing=function(){var n=this;"undefined"==typeof this._container&&(this._container=e.layerMgr[this._containerName]),this.isFull?this._filledWith():this.isMask&&(this.maskLayer=t(this.isClickMaskClose),this._container.addChild(this.maskLayer)),!this.isFull&&this.isPopupCenter&&(this.horizontalCenter="0",this.verticalCenter="0");var r=function(){n._afterAnalysisSkin(),n._container.addChild(n),n.isPlayEffect&&n.popupEffect?n.popupEffect(n,function(){n._onOpened()}):n._onOpened()};if(this.once(egret.Event.COMPLETE,r,this),"undefined"==typeof this.skinNameIdentify){var o=CommonUtil.getClassName(this);this.skinNameIdentify=o.slice(o.lastIndexOf(".")+1)+"Skin"}this.skinName=this.skinNameIdentify},r.prototype._filledWith=function(){this.top=this.bottom=this.left=this.right=0},r.prototype._afterAnalysisSkin=function(){},r.prototype._onOpened=function(){this._addEvent()},r.prototype._addEvent=function(){this.isMask&&this.isClickMaskClose&&this.maskLayer.once(egret.TouchEvent.TOUCH_TAP,this.close,this)},r.prototype.close=function(){var e=this,t=function(){e._removeEvent(),DisplayUtil.removeFromParent(e),DisplayUtil.removeFromParent(e.maskLayer),e.closeHandler&&e.closeHandler(),e._onClosed(),e.emitter.emit("onClose",e.id)};this.isPlayEffect&&this.closeEffect?this.closeEffect(this,t):t()},r.prototype.onExitStage=function(){},r.prototype.destroy=function(){this.emitter.emit("onDestroy",this.id)},r.prototype._onClosed=function(){},r.prototype._removeEvent=function(){},r.prototype.bringToTop=function(){},r.prototype.sendToBack=function(){},r}(eui.Component);e.Dialog=n,__reflect(n.prototype,"rose.Dialog")}(rose||(rose={}));var rose;!function(e){function t(t){e._validModuleFunc=t}function n(t){e._moduleNotFoundFunc=t}var r;!function(e){e[e.EMPTY=0]="EMPTY",e[e.CIRCLE=1]="CIRCLE",e[e.ARMATURE=2]="ARMATURE"}(r=e.LoadingModuleTypeEnum||(e.LoadingModuleTypeEnum={})),e._validModuleFunc=function(){return!0},e._moduleNotFoundFunc=function(e){return console.error(e+"模块未注册")},e.registerValidModuleFunc=t,e.registerModuleNotFoundFunc=n}(rose||(rose={}));var rose;!function(e){var t=function(){function e(){}return e.prototype.initializeInfoLayer=function(e){this._infoLayer_=e,this._infoLayer_.name="_infoLayer_",this._gameStage.addChild(this._infoLayer_),this._msgLayer=new eui.UILayer,this._msgLayer.touchEnabled=!1,this._msgLayer.name="msgLayer",this._infoLayer_.addChild(this._msgLayer),this._guideLayer=new eui.UILayer,this._guideLayer.touchEnabled=!1,this._guideLayer.name="guideLayer",this._infoLayer_.addChild(this._guideLayer),this._topLayer=new eui.UILayer,this._topLayer.touchEnabled=!1,this._topLayer.touchChildren=!1,this._topLayer.name="topLayer",this._infoLayer_.addChild(this._topLayer)},e.prototype.initializeGameLayer=function(e){this._gameLayer_=e,this._gameLayer_.name="_gameLayer_",this._gameStage.addChildAt(this._gameLayer_,0),this._sceneLayer=new eui.UILayer,this._sceneLayer.touchEnabled=!1,this._sceneLayer.name="sceneLayer",this._gameLayer_.addChild(this._sceneLayer),this._menuLayer=new eui.UILayer,this._menuLayer.touchEnabled=!1,this._menuLayer.name="menuLayer",this._gameLayer_.addChild(this._menuLayer),this._dlgLayer=new eui.UILayer,this._dlgLayer.touchEnabled=!1,this._dlgLayer.name="dlgLayer",this._gameLayer_.addChild(this._dlgLayer)},e.prototype.clearBag=function(){this._gameStage&&(this._gameStage.removeChildren(),this._gameLayer_&&this._gameStage.addChild(this._gameLayer_),this._infoLayer_&&this._gameStage.addChild(this._infoLayer_))},Object.defineProperty(e.prototype,"gameStage",{get:function(){return this._gameStage},set:function(e){this._gameStage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._sceneLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menuLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dlg",{get:function(){return this._dlgLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return this._msgLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guide",{get:function(){return this._guideLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._topLayer},enumerable:!0,configurable:!0}),e}();e.LayerManager=t,__reflect(t.prototype,"rose.LayerManager"),e.layerMgr=new t}(rose||(rose={}));var rose;!function(e){var t=function(){function t(t){this._values=t,this.emitter=new e.EventEmitter}return t.prototype.setValue=function(e,n){var r=this._values[e];this._values[e]=n,this.emitter.emit(t.CHANGE_DATA_KEY+e,n,r),this.emitter.emit(t.CHANGE_DATA)},t.prototype.get=function(e){var t=this._values;return t[e]},t.prototype.getAll=function(){var e={};for(var t in this._values)this._values.hasOwnProperty(t)&&(e[t]=this._values[t]);return e},t.prototype.query=function(e){var t={};return t},t.prototype.each=function(e,t){},t.prototype.register=function(e,n){this.emitter.on(t.CHANGE_DATA,e,n)},t.prototype.unregister=function(e,n){this.emitter.off(t.CHANGE_DATA,e,n)},t.prototype.registerByKey=function(e,n,r){this.emitter.on(t.CHANGE_DATA_KEY+e,n,r)},t.prototype.unregisterByKey=function(e,n,r){this.emitter.off(t.CHANGE_DATA_KEY+e,n,r)},t.prototype.unregisterAll=function(){this.emitter.removeAllListeners()},t.prototype.destroy=function(){this.unregisterAll()},t.RESET_DATA="reset_data",t.CHANGE_DATA="change_data",t.CHANGE_DATA_KEY="change_data_",t}();e.DataManager=t,__reflect(t.prototype,"rose.DataManager",["rose.IDataManager"])}(rose||(rose={}));var rose;!function(e){var t=function(){function t(){this.hasData=!1,this._initProp()}return t.prototype._initProp=function(){this.autoNotify=!0,this.autoNotifyAll=!1,this.emitter=new e.EventEmitter},t.prototype.initialize=function(){},t.prototype.setData=function(e){return this.data=e,this.hasData=!0,this},t.prototype.getData=function(){return this.data},t.prototype.setValueAndNotify=function(e,n){this.data[e]=n,this.notifyEvent(t.CHANGE_DATA_KEY+e),this.autoNotifyAll&&this.notifyEvent(t.CHANGE_DATA)},t.prototype.notifyEvent=function(e){this.autoNotify&&this.emitter.emit(e)},t.prototype.getValue=function(e){return this.data[e]},t.prototype.getAll=function(){var e={};return e},t.prototype.register=function(e,n){this.emitter.on(t.CHANGE_DATA,e,n)},t.prototype.unregister=function(e,n){this.emitter.off(t.CHANGE_DATA,e,n)},t.prototype.registerByKey=function(e,n,r){this.emitter.on(t.CHANGE_DATA_KEY+e,n,r)},t.prototype.unregisterByKey=function(e,n,r){this.emitter.off(t.CHANGE_DATA_KEY+e,n,r)},t.prototype.unregisterAll=function(){this.emitter.removeAllListeners()},t.prototype.destroy=function(){this.unregisterAll()},t.RESET_DATA="reset_data",t.CHANGE_DATA="change_data",t.CHANGE_DATA_KEY="change_data_",t}();e.Proxy=t,__reflect(t.prototype,"rose.Proxy",["rose.IProxy"])}(rose||(rose={}));var rose;!function(e){function t(e,t){o[e]=t,i.push(e)}function n(e){return o[e]}function r(e,t){var r=n(e);return r&&r.hasOwnProperty(t)?r[t]:(console.error("亲,"+e+" 文件木有这个ID："+t),null)}var o={},i=[];e.addJSON=t,e.getJSONWithFileName=n,e.getJSONWithFileNameAndID=r}(rose||(rose={}));var rose;!function(e){function t(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];egret.callLater(function(){e.apply(t,n)},null)}e.nextTick=t}(rose||(rose={}));var rose;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.AFTER_CONFIG="afterConfig",t.AFTER_MAIN="afterMain",t}(e.EventEmitter);e.GameEventChannel=t,__reflect(t.prototype,"rose.GameEventChannel"),e.gameEventChannel=new t}(rose||(rose={}));var rose;!function(e){e.InputEventChannel=new e.EventEmitter}(rose||(rose={}));var rose;!function(e){e.NetEventChannel=new e.EventEmitter}(rose||(rose={}));var rose;!function(e){e.TimerEventChannel=new e.EventEmitter}(rose||(rose={}));var rose;!function(e){function t(t){return new Promise(function(n,r){e.layerMgr.gameStage=t;var o=new eui.UILayer;o.touchEnabled=!1,e.layerMgr.initializeInfoLayer(o),e.gameEventChannel.emit(e.GameEventChannel.AFTER_CONFIG),n()})}e.boot=t}(rose||(rose={}));var rose;!function(e){e.dialogShowEaseBackOut=function(e,t){var n=e.width,r=e.height;e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+n/4,e.y=e.y+r/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},300,egret.Ease.backOut).call(t)},e.dialogCloseDefault=function(e,t){egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300).call(t)}}(rose||(rose={}));var rose;!function(e){function t(){return E}function n(e){E=e}function r(){return M}function o(e){M=e}function i(e){v=e}function s(e){return v?v(e):e}function a(n,r){return void 0===r&&(r=1),__awaiter(this,void 0,void 0,function(){var o,i,a;return __generator(this,function(u){switch(u.label){case 0:if(!t())return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.R.getStatusRes(s(n))];case 2:return o=u.sent(),o.type=egret.Sound.EFFECT,i=o.play(0,r),i.volume=m,[2,Promise.resolve(i)];case 3:return a=u.sent(),[2,Promise.reject(a)];case 4:return[2,Promise.resolve()]}})})}function u(e){}function c(t){r()&&e.R.getStatusRes(s(t)).then(function(e){l(),_=e,_.type=egret.Sound.MUSIC,f()})["catch"](function(e){console.error("播放背景音乐失败>>>",e)})}function l(){g&&g.stop()}function f(){r()&&_&&(g=_.play(),g.volume=m)}function h(e){m=e,g&&(g.volume=m)}function p(e,t){}function d(){}function y(e,t){}var _,g,v,m=1,E=!0,M=!1;e.isAudioEnabled=t,e.setAudioEnabled=n,e.isBgMusicEnabled=r,e.setBgMusicEnabled=o,e.registerAudioPathHandler=i,e.getAudioPath=s,e.playAudio=a,e.pauseAudio=u,e.playMusic=c,e.pauseMusic=l,e.resumeMusic=f,e.setMusicVolume=h,e.pushMusic=p,e.popMusic=d,e.replaceMusic=y}(rose||(rose={}));var rose;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.isSubModule=!1,e._initProp(),e}return __extends(n,t),n.prototype._initProp=function(){this.emitter=new e.EventEmitter,this.once(egret.Event.ADDED_TO_STAGE,this.onEnterStage,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.onExitStage,this)},n.prototype.init=function(){},n.prototype.show=function(){this.touchEnabled=!1,e.layerMgr.initializeGameLayer(this)},n.prototype.onEnterStage=function(){},n.prototype.close=function(){DisplayUtil.removeFromParent(this)},n.prototype.onExitStage=function(){},n.prototype.destroy=function(){},n}(eui.UILayer);e.MainModule=t,__reflect(t.prototype,"rose.MainModule",["rose.IModuleBase"])}(rose||(rose={}));var rose;!function(e){var t=function(){function t(t){this.id=t,this.isHideUnder=!1,this.isSubModule=!0,this.loadingType=e.LoadingModuleTypeEnum.EMPTY,this.notOwnRes=!1,this.onValid=function(){return!0}}return t}();e.ModuleCfgItem=t,__reflect(t.prototype,"rose.ModuleCfgItem",["rose.IModuleCfgItem"])}(rose||(rose={}));var rose;!function(e){function t(t){if("object"!=typeof t)throw new Error("Expected the states to be a object.");var n={};return Object.keys(t).forEach(function(r){return n[r]=new e.DataManager(t[r])}),function(e){return n.hasOwnProperty(e)?n[e]:void 0}}e.createStore=t}(rose||(rose={}));var rose;!function(e){var t=function(){function t(){this.moduleConfig={},this.modules=[],this.loadingClassMap={}}return t.prototype.registerLoadingClass=function(e,t){return this.loadingClassMap[e]=t,!0},t.prototype.start=function(t,n){var r=this;return void 0===n&&(n={fromWhere:"empty"}),new Promise(function(o,i){var s=r._getModuleCfgItem(t);if("undefined"==typeof s)return e._moduleNotFoundFunc(name),void i({c:-1,t:"未找到模块"});if(!e._validModuleFunc(s,n))return void i({c:-2,t:"统一模块验证失败"});if(!s.onValid(n))return void i({c:-3,t:"模块验证失败"});var a=r.loadingClassMap[s.loadingType];if("undefined"==typeof a)return console.error("加载页未注册"),void i({c:-4,t:"加载页未找到"});var u=new a;u.show();var c=s.isSubModule,l=s.isHideUnder,f=r.modules.shift();l&&!c&&r._destroyModule(f);var h=new s.targetClass;h.id=t,h.moduleParam=n,h.init(),h.show(),l||c||r._destroyModule(f),c&&(r.modules.unshift(f),h.emitter.once("onClose",r._onCloseHandle,r)),r.modules.push(h),u.hide(),o()})},t.prototype._destroyModule=function(e){if("undefined"!=typeof e){e.close(),e.destroy();for(var t=this.modules,n=t.length-1;n>=0;n--)t[n].destroy();this.modules=[]}},t.prototype._onCloseHandle=function(e){console.log("关闭子模块",e);var t=this._getModuleIndexById(e);if(t>-1){var n=this.modules.splice(t,1).shift();n.destroy()}},t.prototype._getModuleIndexById=function(e){for(var t=0,n=this.modules.length;n>t;t++)if(this.modules[t].id===e)return t;return-1},t.prototype._getModuleCfgItem=function(e){return this.moduleConfig[e]},t.prototype.popModule=function(){},t.prototype.getAllModule=function(){return this.modules.slice()},t.prototype.registerModule=function(e){return this.moduleConfig[e.id]=e,!0},t}();e.ModuleManager=t,__reflect(t.prototype,"rose.ModuleManager",["rose.IModuleManager"]),e.ModuleMgr=new t,e.ModuleMgr.registerLoadingClass(e.LoadingModuleTypeEnum.EMPTY,function(){function e(){}return e.prototype.show=function(){},e.prototype.hide=function(){},e}())}(rose||(rose={}));var rose;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSubModule=!0,t}return __extends(t,e),t}(e.Dialog);e.SubModule=t,__reflect(t.prototype,"rose.SubModule",["rose.IModuleBase"])}(rose||(rose={}));var net;!function(e){var t=function(){function e(){}return e}();e.HttpRequestInfo=t,__reflect(t.prototype,"net.HttpRequestInfo",["net.IHttpRequestInfo"])}(net||(net={}));var net;!function(e){var t=function(){function t(){this._initProp()}return t.prototype._initProp=function(){this._requestIdCounter=1,this._waitingRequestMap={}},t.prototype.request=function(e,t,n,r){var o=this._getRequestInfo(e,t,n,r);this._waitingRequestMap[o.requestId]=o,this._requestHttpGet(o)},t.prototype._requestHttpGet=function(e){var t=this,n=e.route,r=""+this._httpUrl+n+CommonUtil.splicingQueryString(e.args),o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(r,egret.HttpMethod.GET),o.once(egret.Event.COMPLETE,function(n){var r=n.currentTarget,o=r.response;t._handleRequestResult(e,o)},this),o.once(egret.IOErrorEvent.IO_ERROR,function(r){logger.error(n,">>>",r.type,r.currentTarget),t._handleRequestError(e,r)},this),o.send()},t.prototype.post4Json=function(e,t,n,r){var o=this._getRequestInfo(e,t,n,r);this._waitingRequestMap[o.requestId]=o,this._requestPost4Json(o)},t.prototype._requestPost4Json=function(e){var t=this,n=e.route,r=e.args,o=""+this._httpUrl+n,i=new egret.HttpRequest;i.setRequestHeader("Content-Type","application/json"),i.responseType=egret.HttpResponseType.TEXT,i.open(o,egret.HttpMethod.POST),i.once(egret.Event.COMPLETE,function(n){var r=n.currentTarget,o=r.response;t._handleRequestResult(e,o)},this),i.once(egret.IOErrorEvent.IO_ERROR,function(r){logger.error(n,">>>",r.type,r.currentTarget),t._handleRequestError(e,r)},this),i.send(r)},t.prototype._getRequestInfo=function(t,n,r,o){var i=this._requestIdCounter++,s=new e.HttpRequestInfo;return s.requestId=i,s.route=t,s.args=n,s.cb=r,s.ctx=o,s},t.prototype._handleRequestResult=function(e,t){var n=e.requestId,r=e.cb,o=e.ctx;r.call(o,null,t),delete this._waitingRequestMap[n]},t.prototype._handleRequestError=function(e,t){var n=e.requestId,r=e.cb,o=e.ctx;r.call(o,new Error(t.type),null),delete this._waitingRequestMap[n]},t.prototype.reset=function(){this._waitingRequestMap={},this._requestIdCounter=1},t.ON_ERROR="error",t.ON_CLOSE="close",t.ON_KICK="kick",t.ON_SUCCESS="success",t.ON_ROUTE_ERROR="resultError",t.ON_ROUTE_SUCCESS="resultSuccess",t}();e.HttpServer=t,__reflect(t.prototype,"net.HttpServer")}(net||(net={}));var rose;!function(e){var t=function(){function e(){}return e.prototype._initProp=function(){},e.prototype.getStatusRes=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=RES.getRes(e),t?[2,Promise.resolve(t)]:[2,RES.getResAsync(e)]})})},e}();e.Res=t,__reflect(t.prototype,"rose.Res"),e.R=new t}(rose||(rose={}));var CommonUtil;!function(e){function t(e){return e.__proto__.__class__}function n(e,t){void 0===t&&(t=function(e){return e});var n=[];return Object.keys(e).forEach(function(r){return n.push([r,t(e[r])].join("="))}),"?"+n.join("&")}e.getClassName=t,e.splicingQueryString=n,e.getUrlParams=function(e){var t={},n=e||window.location.href,r=n.indexOf("?");if(-1===r)return t;for(var o=n.substring(r+1),i=o.split("&"),s=0,a=i.length;a>s;s++){var u=i[s],c=u.indexOf("=");if(-1!==c){var l=u.substring(0,c),f=u.substring(c+1);t[l]=f}else t[u]="0"}return t}}(CommonUtil||(CommonUtil={}));var DisplayUtil;!function(e){function t(e){e&&e.parent&&e.parent.removeChild(e)}function n(e){for(;e.numChildren>0;)e.removeChildAt(0)}function r(e,t,n){return void 0===n&&(n=!0),o(e,t,750,1336,n)}function o(e,t,n,r,o){void 0===o&&(o=!1);var i=new eui.Rect(n,r,e);return i.alpha=t,i.touchEnabled=o,i}function i(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t}e.removeFromParent=t,e.removeAllChildrenFromScratch=n,e.createMaskFull=r,e.createMask=o,e.createBitmapByName=i}(DisplayUtil||(DisplayUtil={}));var logger;!function(e){function t(t){t>1&&(e.log=n,e.debug=n),t>2&&(e.info=n),t>3&&(e.warn=n),t>4&&(e.error=n)}var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]};e.log=console.log.bind(console),e.debug=console.debug.bind(console),e.info=console.info.bind(console),e.warn=console.warn.bind(console),e.error=console.error.bind(console),e.setLvl=t}(logger||(logger={}));var MathsUtil;!function(e){function t(e,t,n){var r=Math.floor(e/t*n);return r>n&&(r=n),r}function n(e,t){return r(Math.floor(Math.random()*(t-e+1)+e),e,t)}function r(e,t,n){return Math.min(Math.max(e,t),n)}function o(e){return new egret.Point(Math.cos(e),Math.sin(e))}function i(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x);return new egret.Point(Math.cos(n),Math.sin(n))}function s(e,t,n){var r=t*l;return e.add(new egret.Point(Math.cos(r)*n,Math.sin(r)*n))}function a(e,t,n){return e.add(new egret.Point(Math.cos(t)*n,Math.sin(t)*n))}function u(e,t){if(void 0===t&&(t=0),0>e||e>1)return 0;if(0>t||t>1)return 0;var n=.5-Math.sqrt((1-t)/4),r=e*(1-n)+n;return 4*(r-.5)*(r-.5)-1}e.numPercentage=t,e.rangeRandom=n,e.clamp=r;var c=180/Math.PI,l=Math.PI/180;e.radiansToDegrees=function(e){return e*c},e.degreesToRadians=function(e){return e*l},e.pointAngle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*c},e.pointRadians=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},e.angleToSpeed=function(e){var t=e*l;return new egret.Point(Math.cos(t),Math.sin(t))},e.measureDistance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.radiansToSpeed=o,e.angleSpeed=i,e.getCirclePoint=s,e.getCirclePoint2=a,e.getBezierY=u}(MathsUtil||(MathsUtil={}));var MovieClipUtils=function(){function e(){}return e.createMovieClip=function(e,t,n,r){if(!this.depot.hasOwnProperty(e)){var o=RES.getRes(e+"_json"),i=RES.getRes(e+"_png");o&&i&&(this.depot[e]=new egret.MovieClipDataFactory(o,i))}n.call(r,new egret.MovieClip(this.depot[e].generateMovieClipData(t)))},e.depot={},e}();__reflect(MovieClipUtils.prototype,"MovieClipUtils");var utils;!function(e){function t(e){function t(){e.update(),window.setTimeout(t,1e3)}window.setTimeout(t,1e3)}var n=function(){function e(){this.costEnterFrame=0,this.isPaused=!1,this.callBackList=[],this.thisObjectList=[]}return e.prototype.startTick=function(e,t){var n=this.getTickIndex(e,t);-1==n&&(this.concatTick(),this.callBackList.push(e),this.thisObjectList.push(t))},e.prototype.stopTick=function(e,t){var n=this.getTickIndex(e,t);-1!==n&&(this.concatTick(),this.callBackList.splice(n,1),this.thisObjectList.splice(n,1))},e.prototype.getTickIndex=function(e,t){for(var n=this.callBackList,r=this.thisObjectList,o=n.length-1;o>=0;o--)if(n[o]==e&&r[o]==t)return o;return-1},e.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},e.prototype.pause=function(){this.isPaused=!0},e.prototype.resume=function(){this.isPaused=!1},e.prototype.update=function(){var e=Date.now(),t=this.callBackList,n=this.thisObjectList,r=t.length,o=Date.now();if(!this.isPaused){for(var i=0;r>i;i++)t[i].call(n[i],o);var s=Date.now();this.costEnterFrame=s-e}},e}();e.TimedTaskTicker=n,__reflect(n.prototype,"utils.TimedTaskTicker"),e.ticker=new n,e.startTimedTaskTicker=t}(utils||(utils={}));