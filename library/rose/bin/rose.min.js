var __awaiter=this&&this.__awaiter||function(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u["throw"](e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})};var __generator=this&&this.__generator||function(e,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,t;return t={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function a(t){return function(e){return u([t,e])}}function u(t){if(i)throw new TypeError("Generator is already executing.");while(r)try{if(i=1,o&&(s=t[0]&2?o["return"]:t[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;if(o=0,s)t=[t[0]&2,s.value];switch(t[0]){case 0:case 1:s=t;break;case 4:r.label++;return{value:t[1],done:false};case 5:r.label++;o=t[1];t=[0];continue;case 7:t=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(t[0]===6||t[0]===2)){r=0;continue}if(t[0]===3&&(!s||t[1]>s[0]&&t[1]<s[3])){r.label=t[1];break}if(t[0]===6&&r.label<s[1]){r.label=s[1];s=t;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(t);break}if(s[2])r.ops.pop();r.trys.pop();continue}t=n.call(e,r)}catch(e){t=[6,e];o=0}finally{i=s=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var __extends=this&&this.__extends||function(){var r=function(e,t){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var rose;(function(s){var a=1;var t=true;var n=false;var r;var i;var o;function u(){return t}s.isAudioEnabled=u;function e(e){t=e}s.setAudioEnabled=e;function c(){return n}s.isBgMusicEnabled=c;function l(e){n=e}s.setBgMusicEnabled=l;function f(e){o=e}s.registerAudioPathHandler=f;function h(e){return o?o(e):e}s.getAudioPath=h;function p(i,o){if(o===void 0){o=1}return __awaiter(this,void 0,void 0,function(){var t,n,r;return __generator(this,function(e){switch(e.label){case 0:if(!u())return[3,4];e.label=1;case 1:e.trys.push([1,3,,4]);return[4,s.R.getStatusRes(h(i))];case 2:t=e.sent();t.type=egret.Sound.EFFECT;n=t.play(0,o);n.volume=a;return[2,Promise.resolve(n)];case 3:r=e.sent();return[2,Promise.reject(r)];case 4:return[2,Promise.resolve()]}})})}s.playAudio=p;function d(e){}s.pauseAudio=d;function v(e){if(c()){s.R.getStatusRes(h(e)).then(function(e){y();r=e;r.type=egret.Sound.MUSIC;g()}).catch(function(e){console.error("播放背景音乐失败>>>",e)})}}s.playMusic=v;function y(){if(i){i.stop()}}s.pauseMusic=y;function g(){if(c()&&r){i=r.play();i.volume=a}}s.resumeMusic=g;function _(e){a=e;if(i){i.volume=a}}s.setMusicVolume=_;function m(e,t){}s.pushMusic=m;function E(){}s.popMusic=E;function M(e,t){}s.replaceMusic=M})(rose||(rose={}));var rose;(function(i){function e(r){return new Promise(function(e,t){i.layerMgr.gameStage=r;var n=new eui.UILayer;n.touchEnabled=false;i.layerMgr.initializeInfoLayer(n);i.gameEventChannel.emit(i.GameEventChannel.AFTER_CONFIG);e()})}i.boot=e})(rose||(rose={}));var rose;(function(n){var e=function(t){__extends(e,t);function e(){var e=t.call(this)||this;e.isSubModule=false;e._initProp();return e}e.prototype._initProp=function(){this.emitter=new n.EventEmitter;this.once(egret.Event.ADDED_TO_STAGE,this.onEnterStage,this);this.once(egret.Event.REMOVED_FROM_STAGE,this.onExitStage,this)};e.prototype.init=function(){};e.prototype.show=function(){this.touchEnabled=false;n.layerMgr.initializeGameLayer(this)};e.prototype.onEnterStage=function(){};e.prototype.close=function(){DisplayUtil.removeFromParent(this)};e.prototype.onExitStage=function(){};e.prototype.destroy=function(){};return e}(eui.UILayer);n.MainModule=e})(rose||(rose={}));var rose;(function(t){var e=function(){function e(e){this.id=e;this.isHideUnder=false;this.isSubModule=true;this.loadingType=t.LoadingModuleTypeEnum.EMPTY;this.notOwnRes=false;this.onValid=function(){return true}}return e}();t.ModuleCfgItem=e})(rose||(rose={}));var rose;(function(t){var e;(function(e){e[e["EMPTY"]=0]="EMPTY";e[e["CIRCLE"]=1]="CIRCLE";e[e["ARMATURE"]=2]="ARMATURE"})(e=t.LoadingModuleTypeEnum||(t.LoadingModuleTypeEnum={}));t._validModuleFunc=function(){return true};t._moduleNotFoundFunc=function(e){return console.error(e+"模块未注册")};function n(e){t._validModuleFunc=e}t.registerValidModuleFunc=n;function r(e){t._moduleNotFoundFunc=e}t.registerModuleNotFoundFunc=r})(rose||(rose={}));var rose;(function(h){var e=function(){function e(){this.moduleConfig={};this.modules=[];this.loadingClassMap={}}e.prototype.registerLoadingClass=function(e,t){this.loadingClassMap[e]=t;return true};e.prototype.start=function(c,l){var f=this;if(l===void 0){l={fromWhere:"empty"}}return new Promise(function(e,t){var n=f._getModuleCfgItem(c);if(typeof n==="undefined"){h._moduleNotFoundFunc(name);t({c:-1,t:"未找到模块"});return}if(!h._validModuleFunc(n,l)){t({c:-2,t:"统一模块验证失败"});return}if(!n.onValid(l)){t({c:-3,t:"模块验证失败"});return}var r=f.loadingClassMap[n.loadingType];if(typeof r==="undefined"){console.error("加载页未注册");t({c:-4,t:"加载页未找到"});return}var i=new r;i.show();var o=n.isSubModule;var s=n.isHideUnder;var a=f.modules.shift();if(s&&!o){f._destroyModule(a)}var u=new n.targetClass;u.id=c;u.moduleParam=l;u.init();u.show();if(!s&&!o){f._destroyModule(a)}if(o){f.modules.unshift(a);u.emitter.once("onClose",f._onCloseHandle,f)}f.modules.push(u);i.hide();e()})};e.prototype._destroyModule=function(e){if(typeof e!=="undefined"){e.close();e.destroy();var t=this.modules;for(var n=t.length-1;n>=0;n--){t[n].destroy()}this.modules=[]}};e.prototype._onCloseHandle=function(e){console.log("关闭子模块",e);var t=this._getModuleIndexById(e);if(t>-1){var n=this.modules.splice(t,1).shift();n.destroy()}};e.prototype._getModuleIndexById=function(e){for(var t=0,n=this.modules.length;t<n;t++){if(this.modules[t].id===e){return t}}return-1};e.prototype._getModuleCfgItem=function(e){return this.moduleConfig[e]};e.prototype.popModule=function(){};e.prototype.getAllModule=function(){return this.modules.slice()};e.prototype.registerModule=function(e){this.moduleConfig[e.id]=e;return true};return e}();h.ModuleManager=e;h.ModuleMgr=new e;h.ModuleMgr.registerLoadingClass(h.LoadingModuleTypeEnum.EMPTY,function(){function e(){}e.prototype.show=function(){};e.prototype.hide=function(){};return e}())})(rose||(rose={}));var rose;(function(r){var i=function(e,t){if(e===void 0){e=true}if(t===void 0){t=.4}var n=new egret.Sprite;n.graphics.beginFill(0,t);n.graphics.drawRect(0,0,r.layerMgr.gameStage.stageWidth,r.layerMgr.gameStage.stageHeight);n.graphics.endFill();n.touchEnabled=e;return n};var e=function(t){__extends(e,t);function e(){var e=t.call(this)||this;e.isFull=false;e.isMask=true;e.isClickMaskClose=true;e.isPopupCenter=true;e._containerName="dlg";e.isPlayEffect=false;e._initProp();return e}e.prototype._initProp=function(){this.emitter=new r.EventEmitter;this.once(egret.Event.ADDED_TO_STAGE,this.onEnterStage,this);this.once(egret.Event.REMOVED_FROM_STAGE,this.onExitStage,this)};e.prototype.init=function(){};e.prototype.show=function(){this._showing()};e.prototype.onEnterStage=function(){};e.prototype._showing=function(){var e=this;if(typeof this._container==="undefined"){this._container=r.layerMgr[this._containerName]}if(this.isFull){this._filledWith()}else if(this.isMask){this.maskLayer=i(this.isClickMaskClose);this._container.addChild(this.maskLayer)}if(!this.isFull&&this.isPopupCenter){this.horizontalCenter="0";this.verticalCenter="0"}var t=function(){e._afterAnalysisSkin();e._container.addChild(e);if(e.isPlayEffect&&e.popupEffect){e.popupEffect(e,function(){e._onOpened()})}else{e._onOpened()}};this.once(egret.Event.COMPLETE,t,this);if(typeof this.skinNameIdentify==="undefined"){var n=CommonUtil.getClassName(this);this.skinNameIdentify=n.slice(n.lastIndexOf(".")+1)+"Skin"}this.skinName=this.skinNameIdentify};e.prototype._filledWith=function(){this.top=this.bottom=this.left=this.right=0};e.prototype._afterAnalysisSkin=function(){};e.prototype._onOpened=function(){this._addEvent()};e.prototype._addEvent=function(){if(this.isMask&&this.isClickMaskClose){this.maskLayer.once(egret.TouchEvent.TOUCH_TAP,this.close,this)}};e.prototype.close=function(){var e=this;var t=function(){e._removeEvent();DisplayUtil.removeFromParent(e);DisplayUtil.removeFromParent(e.maskLayer);e.closeHandler&&e.closeHandler();e._onClosed();e.emitter.emit("onClose",e.id)};if(this.isPlayEffect&&this.closeEffect){this.closeEffect(this,t)}else{t()}};e.prototype.onExitStage=function(){};e.prototype.destroy=function(){this.emitter.emit("onDestroy",this.id)};e.prototype._onClosed=function(){};e.prototype._removeEvent=function(){};e.prototype.bringToTop=function(){};e.prototype.sendToBack=function(){};return e}(eui.Component);r.Dialog=e})(rose||(rose={}));var rose;(function(e){var t=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.isSubModule=true;return e}return e}(e.Dialog);e.SubModule=t})(rose||(rose={}));var rose;(function(e){var t=function(){function e(){this._initProp()}e.prototype._initProp=function(){};return e}();e.Service=t})(rose||(rose={}));var rose;(function(e){function t(n){if(typeof n!=="object"){throw new Error("Expected the service to be a object.")}var e=false;var r={};function t(e){if(!r.hasOwnProperty(e)){throw new Error(e+" service not provided！！！")}return r[e]}function i(){if(e)return;e=true;Object.keys(n).forEach(function(e){var t=n[e];r[e]=new t});n=null}return{initialize:i,use:t}}e.createService=t})(rose||(rose={}));var rose;(function(t){var e=function(){function r(e){this._values=e;this.emitter=new t.EventEmitter}r.prototype.setValue=function(e,t){var n=this._values[e];this._values[e]=t;this.emitter.emit(r.CHANGE_DATA_KEY+e,t,n);this.emitter.emit(r.CHANGE_DATA)};r.prototype.get=function(e){var t=this._values;return t[e]};r.prototype.getAll=function(){var e={};for(var t in this._values){if(this._values.hasOwnProperty(t)){e[t]=this._values[t]}}return e};r.prototype.query=function(e){var t={};return t};r.prototype.each=function(e,t){};r.prototype.register=function(e,t){this.emitter.on(r.CHANGE_DATA,e,t)};r.prototype.unregister=function(e,t){this.emitter.off(r.CHANGE_DATA,e,t)};r.prototype.registerByKey=function(e,t,n){this.emitter.on(r.CHANGE_DATA_KEY+e,t,n)};r.prototype.unregisterByKey=function(e,t,n){this.emitter.off(r.CHANGE_DATA_KEY+e,t,n)};r.prototype.unregisterAll=function(){this.emitter.removeAllListeners()};r.prototype.destroy=function(){this.unregisterAll()};r.RESET_DATA="reset_data";r.CHANGE_DATA="change_data";r.CHANGE_DATA_KEY="change_data_";return r}();t.DataManager=e})(rose||(rose={}));var rose;(function(e){var n={};var r=[];function t(e,t){}function i(e,t){}function o(e,t,n){}function s(e,t){n[e]=t;r.push(e)}e.addJSON=s;function a(e){return n[e]}e.getJSONWithFileName=a;function u(e,t){var n=a(e);if(n&&n.hasOwnProperty(t)){return n[t]}console.error(e+" 文件没这个ID："+t);return undefined}e.getJSONWithFileNameAndID=u})(rose||(rose={}));var rose;(function(r){function e(t){if(typeof t!=="object"){throw new Error("Expected the states to be a object.")}var n={};Object.keys(t).forEach(function(e){return n[e]=new r.DataManager(t[e])});function e(e){if(!n.hasOwnProperty(e)){throw new Error(e+" state not provided！！！")}return n[e]}return{getDataManager:e}}r.createStore=e})(rose||(rose={}));var rose;(function(e){var t=function(){function e(){this._events=Object.create(null);this._eventsCount=0}e.prototype.eventNames=function(){if(this._eventsCount===0)return[];var e=this._events;return Object.keys(e)};e.prototype.listeners=function(e){var t=this._events[e];if(!t)return[];var n=[];for(var r=0,i=t.length;r<i;r++){n[r]=t[r].fn}return n};e.prototype.listenerCount=function(e){var t=this._events[e];if(!t)return 0;return t.length};e.prototype.emit=function(e,t,n,r,i,o){var s=this._events[e];if(!s)return false;var a=[];for(var u=0,c=s.length;u<c;u++){var l=s[u];if(l.once){a.push(l)}switch(arguments.length){case 1:l.fn.call(l.context);break;case 2:l.fn.call(l.context,t);break;case 3:l.fn.call(l.context,t,n);break;case 4:l.fn.call(l.context,t,n,r);break;case 5:l.fn.call(l.context,t,n,r,i);break;case 6:l.fn.call(l.context,t,n,r,i,o);break;default:console.error(">>>更多参数请使用数组实现!")}}while(a.length){var f=a.pop();this.removeListener(e,f.fn,f.context)}return true};e.prototype.removeListener=function(e,t,n){var r=this._events[e];if(!r)return;if(!t){this._clearEvent(e);return}for(var i=0,o=r.length;i<o;i++){if(r[i].fn===t&&r[i].context===n){r.splice(i,1);return}}};e.prototype.on=function(e,t,n){this._addListener(e,t,n,false)};e.prototype.once=function(e,t,n){this._addListener(e,t,n,true)};e.prototype.removeAllListeners=function(e){if(e){if(this._events[e]){this._clearEvent(e)}}else{this._events=Object.create(null);this._eventsCount=0}};e.prototype.off=function(e,t,n){this.removeListener(e,t,n)};e.prototype.addListener=function(e,t,n){this.on(e,t,n)};e.prototype._addListener=function(e,t,n,r){if(typeof t!=="function"){throw new TypeError("The listener must be a function")}var i={fn:t,context:n,once:r};var o=this._events[e];if(!o){o=this._events[e]=[];this._eventsCount++}o.push(i)};e.prototype._clearEvent=function(e){--this._eventsCount;delete this._events[e]};return e}();e.EventEmitter=t})(rose||(rose={}));var rose;(function(e){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.AFTER_CONFIG="afterConfig";t.AFTER_MAIN="afterMain";return t}(e.EventEmitter);e.GameEventChannel=t;e.gameEventChannel=new t})(rose||(rose={}));var rose;(function(e){e.InputEventChannel=new e.EventEmitter})(rose||(rose={}));var rose;(function(e){e.NetEventChannel=new e.EventEmitter})(rose||(rose={}));var rose;(function(e){e.TimerEventChannel=new e.EventEmitter})(rose||(rose={}));var rose;(function(e){e.dialogShowEaseBackOut=function(e,t){var n=e.width;var r=e.height;e.alpha=0;e.scaleX=.5;e.scaleY=.5;e.x=e.x+n/4;e.y=e.y+r/4;egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},300,egret.Ease.backOut).call(t)};e.dialogCloseDefault=function(e,t){egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300).call(t)}})(rose||(rose={}));var rose;(function(e){var t=function(){function e(){}e.prototype.initializeInfoLayer=function(e){this._infoLayer_=e;this._infoLayer_.name="_infoLayer_";this._gameStage.addChild(this._infoLayer_);this._msgLayer=new eui.UILayer;this._msgLayer.touchEnabled=false;this._msgLayer.name="msgLayer";this._infoLayer_.addChild(this._msgLayer);this._guideLayer=new eui.UILayer;this._guideLayer.touchEnabled=false;this._guideLayer.name="guideLayer";this._infoLayer_.addChild(this._guideLayer);this._topLayer=new eui.UILayer;this._topLayer.touchEnabled=false;this._topLayer.touchChildren=false;this._topLayer.name="topLayer";this._infoLayer_.addChild(this._topLayer)};e.prototype.initializeGameLayer=function(e){this._gameLayer_=e;this._gameLayer_.name="_gameLayer_";this._gameStage.addChildAt(this._gameLayer_,0);this._sceneLayer=new eui.UILayer;this._sceneLayer.touchEnabled=false;this._sceneLayer.name="sceneLayer";this._gameLayer_.addChild(this._sceneLayer);this._menuLayer=new eui.UILayer;this._menuLayer.touchEnabled=false;this._menuLayer.name="menuLayer";this._gameLayer_.addChild(this._menuLayer);this._dlgLayer=new eui.UILayer;this._dlgLayer.touchEnabled=false;this._dlgLayer.name="dlgLayer";this._gameLayer_.addChild(this._dlgLayer)};e.prototype.clearBag=function(){if(this._gameStage){this._gameStage.removeChildren();if(this._gameLayer_){this._gameStage.addChild(this._gameLayer_)}if(this._infoLayer_){this._gameStage.addChild(this._infoLayer_)}}};Object.defineProperty(e.prototype,"gameStage",{get:function(){return this._gameStage},set:function(e){this._gameStage=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene",{get:function(){return this._sceneLayer},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"menu",{get:function(){return this._menuLayer},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"dlg",{get:function(){return this._dlgLayer},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"msg",{get:function(){return this._msgLayer},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"guide",{get:function(){return this._guideLayer},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this._topLayer},enumerable:true,configurable:true});return e}();e.LayerManager=t;e.layerMgr=new t})(rose||(rose={}));var net;(function(e){var t=function(){function e(){}return e}();e.HttpRequestInfo=t})(net||(net={}));var net;(function(s){var e=function(){function e(){this._initProp()}e.prototype._initProp=function(){this._requestIdCounter=1;this._waitingRequestMap={}};e.prototype.request=function(e,t,n,r){var i=this._getRequestInfo(e,t,n,r);this._waitingRequestMap[i.requestId]=i;this._requestHttpGet(i)};e.prototype._requestHttpGet=function(r){var i=this;var t=r.route;var e=""+this._httpUrl+t+CommonUtil.splicingQueryString(r.args);var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT;n.open(e,egret.HttpMethod.GET);n.once(egret.Event.COMPLETE,function(e){var t=e.currentTarget;var n=t.response;i._handleRequestResult(r,n)},this);n.once(egret.IOErrorEvent.IO_ERROR,function(e){logger.error(t,">>>",e.type,e.currentTarget);i._handleRequestError(r,e)},this);n.send()};e.prototype.post4Json=function(e,t,n,r){var i=this._getRequestInfo(e,t,n,r);this._waitingRequestMap[i.requestId]=i;this._requestPost4Json(i)};e.prototype._requestPost4Json=function(r){var i=this;var t=r.route;var e=r.args;var n=""+this._httpUrl+t;var o=new egret.HttpRequest;o.setRequestHeader("Content-Type","application/json");o.responseType=egret.HttpResponseType.TEXT;o.open(n,egret.HttpMethod.POST);o.once(egret.Event.COMPLETE,function(e){var t=e.currentTarget;var n=t.response;i._handleRequestResult(r,n)},this);o.once(egret.IOErrorEvent.IO_ERROR,function(e){logger.error(t,">>>",e.type,e.currentTarget);i._handleRequestError(r,e)},this);o.send(e)};e.prototype._getRequestInfo=function(e,t,n,r){var i=this._requestIdCounter++;var o=new s.HttpRequestInfo;o.requestId=i;o.route=e;o.args=t;o.cb=n;o.ctx=r;return o};e.prototype._handleRequestResult=function(e,t){var n=e.requestId;var r=e.cb;var i=e.ctx;r.call(i,null,t);delete this._waitingRequestMap[n]};e.prototype._handleRequestError=function(e,t){var n=e.requestId;var r=e.cb;var i=e.ctx;r.call(i,new Error(t.type),null);delete this._waitingRequestMap[n]};e.prototype.reset=function(){this._waitingRequestMap={};this._requestIdCounter=1};e.ON_ERROR="error";e.ON_CLOSE="close";e.ON_KICK="kick";e.ON_SUCCESS="success";e.ON_ROUTE_ERROR="resultError";e.ON_ROUTE_SUCCESS="resultSuccess";return e}();s.HttpServer=e})(net||(net={}));var rose;(function(e){var t=function(){function e(){}e.prototype._initProp=function(){};e.prototype.getStatusRes=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){t=RES.getRes(n);if(t){return[2,Promise.resolve(t)]}return[2,RES.getResAsync(n)]})})};return e}();e.Res=t;e.R=new t})(rose||(rose={}));var CommonUtil;(function(e){function t(e){return e["__proto__"]["__class__"]}e.getClassName=t;function n(t,n){if(n===void 0){n=function(e){return e}}var r=[];Object.keys(t).forEach(function(e){return r.push([e,n(t[e])].join("="))});return"?"+r.join("&")}e.splicingQueryString=n;e.getUrlParams=function(e){var t={};var n=e||window.location.href;var r=n.indexOf("?");if(r===-1){return t}var i=n.substring(r+1);var o=i.split("&");for(var s=0,a=o.length;s<a;s++){var u=o[s];var c=u.indexOf("=");if(c===-1){t[u]="0";continue}var l=u.substring(0,c);var f=u.substring(c+1);t[l]=f}return t}})(CommonUtil||(CommonUtil={}));var DisplayUtil;(function(e){function t(e){e&&e.parent&&e.parent.removeChild(e)}e.removeFromParent=t;function n(e){while(e.numChildren>0){e.removeChildAt(0)}}e.removeAllChildrenFromScratch=n;function r(e,t,n){if(n===void 0){n=true}return i(e,t,750,1336,n)}e.createMaskFull=r;function i(e,t,n,r,i){if(i===void 0){i=false}var o=new eui.Rect(n,r,e);o.alpha=t;o.touchEnabled=i;return o}e.createMask=i;function o(e){var t=new egret.Bitmap;var n=RES.getRes(e);t.texture=n;return t}e.createBitmapByName=o})(DisplayUtil||(DisplayUtil={}));var MathsUtil;(function(e){function t(e,t,n){var r=Math.floor(e/t*n);if(r>n){r=n}return r}e.numPercentage=t;function n(e,t){return r(Math.floor(Math.random()*(t-e+1)+e),e,t)}e.rangeRandom=n;function r(e,t,n){return Math.min(Math.max(e,t),n)}e.clamp=r;var i=180/Math.PI;var o=Math.PI/180;e.radiansToDegrees=function(e){return e*i};e.degreesToRadians=function(e){return e*o};e.pointAngle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*i};e.pointRadians=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};e.angleToSpeed=function(e){var t=e*o;return new egret.Point(Math.cos(t),Math.sin(t))};e.measureDistance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))};function s(e){return new egret.Point(Math.cos(e),Math.sin(e))}e.radiansToSpeed=s;function a(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x);return new egret.Point(Math.cos(n),Math.sin(n))}e.angleSpeed=a;function u(e,t,n){var r=t*o;return e.add(new egret.Point(Math.cos(r)*n,Math.sin(r)*n))}e.getCirclePoint=u;function c(e,t,n){return e.add(new egret.Point(Math.cos(t)*n,Math.sin(t)*n))}e.getCirclePoint2=c;function l(e,t){if(void 0===t&&(t=0),0>e||e>1)return 0;if(0>t||t>1)return 0;var n=.5-Math.sqrt((1-t)/4);var r=e*(1-n)+n;return 4*(r-.5)*(r-.5)-1}e.getBezierY=l})(MathsUtil||(MathsUtil={}));var MovieClipUtils=function(){function e(){}e.createMovieClip=function(e,t,n,r){if(!this.depot.hasOwnProperty(e)){var i=RES.getRes(e+"_json");var o=RES.getRes(e+"_png");if(i&&o){this.depot[e]=new egret.MovieClipDataFactory(i,o)}}n.call(r,new egret.MovieClip(this.depot[e].generateMovieClipData(t)))};e.depot={};return e}();var utils;(function(e){var t=function(){function e(){this.costEnterFrame=0;this.isPaused=false;this.callBackList=[];this.thisObjectList=[]}e.prototype.startTick=function(e,t){var n=this.getTickIndex(e,t);if(n!=-1){return}this.concatTick();this.callBackList.push(e);this.thisObjectList.push(t)};e.prototype.stopTick=function(e,t){var n=this.getTickIndex(e,t);if(n===-1){return}this.concatTick();this.callBackList.splice(n,1);this.thisObjectList.splice(n,1)};e.prototype.getTickIndex=function(e,t){var n=this.callBackList;var r=this.thisObjectList;for(var i=n.length-1;i>=0;i--){if(n[i]==e&&r[i]==t){return i}}return-1};e.prototype.concatTick=function(){this.callBackList=this.callBackList.concat();this.thisObjectList=this.thisObjectList.concat()};e.prototype.pause=function(){this.isPaused=true};e.prototype.resume=function(){this.isPaused=false};e.prototype.update=function(){var e=Date.now();var t=this.callBackList;var n=this.thisObjectList;var r=t.length;var i=Date.now();if(this.isPaused)return;for(var o=0;o<r;o++){t[o].call(n[o],i)}var s=Date.now();this.costEnterFrame=s-e};return e}();e.TimedTaskTicker=t;e.ticker=new t;function n(e){window.setTimeout(t,1e3);function t(){e.update();window.setTimeout(t,1e3)}}e.startTimedTaskTicker=n})(utils||(utils={}));var logger;(function(t){var n=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}};t.log=console.log.bind(console);t.debug=console.debug.bind(console);t.info=console.info.bind(console);t.warn=console.warn.bind(console);t.error=console.error.bind(console);function e(e){if(e>1){t.log=n;t.debug=n}if(e>2){t.info=n}if(e>3){t.warn=n}if(e>4){t.error=n}}t.setLvl=e})(logger||(logger={}));var rose;(function(e){function t(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}egret.callLater(function(){e.apply(t,n)},null)}e.nextTick=t})(rose||(rose={}));